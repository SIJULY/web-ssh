{% extends "layout.html" %}

{% block title %}仪表盘 - 服务器列表{% endblock %}

<style>
    /* 服务器列表样式 */
    .server-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    .server-card {
        background-color: #2a2a2a;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    .server-card h3 {
        margin-top: 0;
        color: #fff;
    }
    .server-card p {
        color: #aaa;
        font-family: monospace;
        margin: 5px 0;
        word-break: break-all;
    }
    .server-actions {
        margin-top: 15px;
        display: flex;
        gap: 10px;
    }
    /* 缩小按钮尺寸以适应卡片 */
    .btn-small {
        padding: 8px 12px;
        font-size: 14px;
        flex: 1; /* 让按钮平分空间 */
        text-align: center;
        text-decoration: none;
    }
    .btn-edit {
        background-color: #ffc107;
        color: #212529;
    }
    .btn-edit:hover {
        background-color: #d39e00;
    }
    .btn-delete-form {
        flex: 1;
        margin: 0;
    }
    .btn-delete {
        width: 100%;
        margin: 0;
    }

    /* 当列表为空时的提示 */
    .empty-state {
        text-align: center;
        padding: 40px;
        background-color: #2a2a2a;
        border-radius: 8px;
    }
    .empty-state h3 {
        color: #fff;
    }
    .empty-state p {
        color: #aaa;
    }
    .empty-state .btn {
        display: inline-block;
        width: auto;
        padding: 12px 20px;
        margin-top: 10px;
    }

</style>

{% block content %}
    <h2>仪表盘</h2>
    
    {% if servers %}
        <div class="server-list">
            {% for server in servers %}
            <div class="server-card">
                <div>
                    <h3>{{ server.name }}</h3>
                    <p>{{ server.username }}@{{ server.host }}:{{ server.port }}</p>
                </div>
                <div class="server-actions">
                    <a href="{{ url_for('terminal', server_id=server.id) }}" 
                       target="_blank" 
                       class="btn btn-small">连接</a>
                    
                    <a href="{{ url_for('edit_server', server_id=server.id) }}" 
                       class="btn btn-small btn-edit">编辑</a>
                    
                    <form action="{{ url_for('delete_server', server_id=server.id) }}" 
                          method="POST" 
                          class="btn-delete-form"
                          onsubmit="return confirm('您确定要删除 {{ server.name | e }} 吗？');">
                        <button type="submit" class="btn btn-small btn-danger btn-delete">删除</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <h3>您还没有添加任何服务器。</h3>
            <p>点击下方按钮开始添加您的第一个 VPS。</p>
            <a href="{{ url_for('add_server') }}" class="btn">添加新服务器</a>
        </div>
    {% endif %}
    
{% endblock %}
